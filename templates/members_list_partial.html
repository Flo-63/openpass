<div id="members-list" class="bg-white rounded shadow p-4 h-[80vh] flex flex-col">

  <!-- 🧭 Kopfbereich -->
  <div class="flex justify-between items-center mb-3 pb-2 border-b border-gray-200">
    <h2 class="text-xl font-semibold">Mitgliederliste</h2>
    <div class="flex gap-2">
      <button
        hx-get="/members/new"
        hx-target="#members-list"
        hx-swap="outerHTML"
        class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">
        ➕ Neues Mitglied
      </button>
    </div>
  </div>

  <!-- 📋 Tabelle (getrennt in Head + Body für korrekten Sticky Header) -->
  <div class="flex-1 flex flex-col border rounded overflow-hidden">

    <!-- Fixierter Tabellenkopf -->
    <table class="w-full border-collapse text-sm">
      <thead class="bg-gray-100 sticky top-0 z-10 shadow-sm">
        <tr class="border-b border-gray-300">
          <th class="px-3 py-2 text-left">Vorname</th>
          <th class="px-3 py-2 text-left">Nachname</th>
          <th class="px-3 py-2 text-left">E-Mail Hash</th>
          <th class="px-3 py-2 text-center">Eintritt</th>
          <th class="px-3 py-2 text-left">Rolle</th>
          <th class="px-3 py-2 text-center w-28">Aktionen</th>
        </tr>
      </thead>
    </table>

    <!-- Scrollbarer Tabellenkörper -->
    <div class="overflow-y-auto flex-1">
      <table class="w-full border-collapse text-sm">
        <tbody>
          {% for m in members %}
          <tr class="border-b hover:bg-gray-50">
            <td class="px-3 py-1">{{ m.firstname }}</td>
            <td class="px-3 py-1">{{ m.lastname }}</td>
            <td class="px-3 py-1 text-xs text-gray-600 font-mono">{{ m.email_hash[:10] }}…</td>
            <td class="px-3 py-1 text-center">{{ m.join_year }}</td>
            <td class="px-3 py-1">{{ m.role }}</td>
            <td class="px-3 py-1 text-center flex justify-center gap-2">
              <!-- Bearbeiten -->
              <button hx-get="/members/edit/{{ m.email_hash }}"
                      hx-target="#members-list"
                      hx-swap="outerHTML"
                      class="text-blue-600 hover:underline"
                      title="Bearbeiten">✏️</button>
              <!-- Löschen -->
              <button hx-delete="/members/delete/{{ m.email_hash }}"
                      hx-target="#members-list"
                      hx-swap="outerHTML"
                      hx-confirm="Soll dieses Mitglied wirklich gelöscht werden?"
                      class="text-red-600 hover:underline"
                      title="Löschen">🗑️</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- 📊 Fußbereich -->
  <div class="mt-3 text-sm text-gray-500 text-center border-t pt-2 flex-shrink-0">
    Zeige {{ members|length }} Mitglieder
  </div>

</div>
